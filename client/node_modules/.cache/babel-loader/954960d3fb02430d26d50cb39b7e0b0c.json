{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jflanagan.NIECE\\\\Desktop\\\\other\\\\creator-site\\\\client\\\\src\\\\pages\\\\UploadDash\\\\UploadDash.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { useQuery } from '@apollo/react-hooks';\nimport { QUERY_VIDEOS } from '../../utils/queries';\nimport { updateVideos } from '../../utils/actions';\nimport { idbPromise } from '../../utils/helpers';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport Spinner from 'react-bootstrap/Spinner';\nimport EditVideoTitle from '../../components/EditVideoTitle/EditVideoTitle';\nimport EditVideoDescription from '../../components/EditVideoDescription/EditVideoDescription';\nimport EditVideoGame from '../../components/EditVideoGame/EditVideoGame';\nimport EditVideoGenres from '../../components/EditVideoGenres/EditVideoGenres';\nimport EditVideoRecorded from '../../components/EditVideoRecorded/EditVideoRecorded';\nimport EditVideoTags from '../../components/EditVideoTags/EditVideoTags';\nimport EditVideoThumbnailUrl from '../../components/EditVideoThumbnailUrl/EditVideoThumbnailUrl';\nimport EditVideo from '../../components/EditVideo/EditVideo';\nimport NoThumbnail from '../../assets/noThumbnail.jpg';\nimport { BiPlay } from 'react-icons/bi';\nimport './UploadDash.css';\n\nconst VideoDash = () => {\n  const videoTitleDefault = 'No title yet added';\n  const descriptionDefault = 'No description yet added';\n  const tagsDefault = 'No tags yet added';\n  const genresDefault = 'No genres yet added';\n  const gamesDefault = 'Add or select the game from which this was created';\n  const state = useSelector(state => state);\n  const {\n    videos\n  } = state;\n  const dispatch = useDispatch(); // get current video's id from url\n\n  const {\n    id\n  } = useParams();\n  const [curVideo, setCurVideo] = useState({});\n  const {\n    loading,\n    data\n  } = useQuery(QUERY_VIDEOS);\n  useEffect(() => {\n    if (data) {\n      setCurVideo(data.videos.find(video => video._id === id));\n      dispatch(updateVideos(data.videos));\n      data.videos.forEach(video => {\n        idbPromise('videos', 'put', video);\n      });\n    } else if (!loading) {\n      idbPromise('videos', 'get').then(indexedVideos => {\n        dispatch(updateVideos(indexedVideos));\n      });\n    }\n  }, [videos, data, loading, dispatch, id]);\n  const playerRef = useRef(null);\n\n  const handlePlayVideo = videoUrl => {\n    playerRef.current.setAttribute('src', videoUrl);\n    playerRef.current.play();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, loading ? /*#__PURE__*/React.createElement(Spinner, {\n    animation: \"border\",\n    role: \"status\",\n    style: {\n      width: '75px',\n      height: '75px',\n      margin: 'auto',\n      marginTop: '6rem',\n      display: 'block'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 6\n    }\n  }, \"Loading...\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"VideoDash vh-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"w-100 my-5 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 8\n    }\n  }, \"Video Upload\"), /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-4 d-flex justify-content-center \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 5,\n    className: \"d-flex flex-column align-items-center justify-content-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 ctrst-bg-secondary pt-2 mb-2 rounded\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"w-75 mx-auto ctrst-bg-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 12\n    }\n  }, \"Inputs\"), /*#__PURE__*/React.createElement(Card.Body, {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(EditVideo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(EditVideoTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(EditVideoDescription, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(EditVideoTags, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(EditVideoThumbnailUrl, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(EditVideoGenres, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(EditVideoGame, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(EditVideoRecorded, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }))))), /*#__PURE__*/React.createElement(Col, {\n    lg: 5,\n    className: \"d-flex flex-column align-items-center justify-content-start mt-0 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ctrst-bg-secondary w-100 mb-3 p-2 rounded d-flex flex-column justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 12\n    }\n  }, \"Preview\"), curVideo.thumbnailUrl ? /*#__PURE__*/React.createElement(Card.Img, {\n    variant: \"top\",\n    className: \"w-75 mx-auto rounded\",\n    src: curVideo.thumbnailUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(Card.Img, {\n    variant: \"top\",\n    className: \"w-75 mx-auto rounded\",\n    src: NoThumbnail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 14\n    }\n  }), curVideo.videoTitle ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, curVideo.videoTitle) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 14\n    }\n  }, videoTitleDefault), curVideo.tags && curVideo.tags.length ? /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"d-flex flex-row flex-wrap justify-content-center mt-2 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, curVideo.tags.map(tag => /*#__PURE__*/React.createElement(\"span\", {\n    key: tag._id,\n    className: \"ctrst-genre-btn-static d-inline-block text-center btn-sm m-1 text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, tag.name))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 14\n    }\n  }, tagsDefault), curVideo.description ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, curVideo.description) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 14\n    }\n  }, descriptionDefault), curVideo.game ? ( /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }, curVideo.game.gameTitle), /*#__PURE__*/React.createElement(\"img\", {\n    src: curVideo.game.gameImgUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 14\n    }\n  }, gamesDefault), curVideo.genres && curVideo.genres.length ? /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"d-flex flex-row flex-wrap justify-content-center mt-2 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, curVideo.genres.map(genre => /*#__PURE__*/React.createElement(\"span\", {\n    key: genre._id,\n    className: \"ctrst-genre-btn-static d-inline-block text-center btn-sm m-1 text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }, genre.genreName))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 14\n    }\n  }, genresDefault))))))));\n};\n\nexport default VideoDash;","map":{"version":3,"sources":["C:/Users/jflanagan.NIECE/Desktop/other/creator-site/client/src/pages/UploadDash/UploadDash.js"],"names":["React","useState","useEffect","useRef","useSelector","useDispatch","useParams","useQuery","QUERY_VIDEOS","updateVideos","idbPromise","Row","Col","Card","Spinner","EditVideoTitle","EditVideoDescription","EditVideoGame","EditVideoGenres","EditVideoRecorded","EditVideoTags","EditVideoThumbnailUrl","EditVideo","NoThumbnail","BiPlay","VideoDash","videoTitleDefault","descriptionDefault","tagsDefault","genresDefault","gamesDefault","state","videos","dispatch","id","curVideo","setCurVideo","loading","data","find","video","_id","forEach","then","indexedVideos","playerRef","handlePlayVideo","videoUrl","current","setAttribute","play","width","height","margin","marginTop","display","thumbnailUrl","videoTitle","tags","length","map","tag","name","description","game","gameTitle","gameImgUrl","genres","genre","genreName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useParams } from 'react-router-dom'\r\nimport { useQuery } from '@apollo/react-hooks'\r\nimport { QUERY_VIDEOS } from '../../utils/queries'\r\nimport { updateVideos } from '../../utils/actions'\r\nimport { idbPromise } from '../../utils/helpers'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Card from 'react-bootstrap/Card'\r\nimport Spinner from 'react-bootstrap/Spinner'\r\nimport EditVideoTitle from '../../components/EditVideoTitle/EditVideoTitle'\r\nimport EditVideoDescription from '../../components/EditVideoDescription/EditVideoDescription'\r\nimport EditVideoGame from '../../components/EditVideoGame/EditVideoGame'\r\nimport EditVideoGenres from '../../components/EditVideoGenres/EditVideoGenres'\r\nimport EditVideoRecorded from '../../components/EditVideoRecorded/EditVideoRecorded'\r\nimport EditVideoTags from '../../components/EditVideoTags/EditVideoTags'\r\nimport EditVideoThumbnailUrl from '../../components/EditVideoThumbnailUrl/EditVideoThumbnailUrl'\r\nimport EditVideo from '../../components/EditVideo/EditVideo'\r\nimport NoThumbnail from '../../assets/noThumbnail.jpg'\r\nimport { BiPlay } from 'react-icons/bi'\r\nimport './UploadDash.css'\r\n\r\nconst VideoDash = () => {\r\n\tconst videoTitleDefault = 'No title yet added'\r\n\tconst descriptionDefault = 'No description yet added'\r\n\tconst tagsDefault = 'No tags yet added'\r\n\tconst genresDefault = 'No genres yet added'\r\n\tconst gamesDefault = 'Add or select the game from which this was created'\r\n\r\n\tconst state = useSelector((state) => state)\r\n\tconst { videos } = state\r\n\tconst dispatch = useDispatch()\r\n\r\n\t// get current video's id from url\r\n\tconst { id } = useParams()\r\n\r\n\tconst [curVideo, setCurVideo] = useState({})\r\n\r\n\tconst { loading, data } = useQuery(QUERY_VIDEOS)\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (data) {\r\n\t\t\t\tsetCurVideo(data.videos.find((video) => video._id === id))\r\n\t\t\t\tdispatch(updateVideos(data.videos))\r\n\r\n\t\t\t\tdata.videos.forEach((video) => {\r\n\t\t\t\t\tidbPromise('videos', 'put', video)\r\n\t\t\t\t})\r\n\t\t\t} else if (!loading) {\r\n\t\t\t\tidbPromise('videos', 'get').then((indexedVideos) => {\r\n\t\t\t\t\tdispatch(updateVideos(indexedVideos))\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t[videos, data, loading, dispatch, id]\r\n\t)\r\n\r\n\tconst playerRef = useRef(null)\r\n\r\n\tconst handlePlayVideo = (videoUrl) => {\r\n\t\tplayerRef.current.setAttribute('src', videoUrl)\r\n\t\tplayerRef.current.play()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<Spinner\r\n\t\t\t\t\tanimation='border'\r\n\t\t\t\t\trole='status'\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: '75px',\r\n\t\t\t\t\t\theight: '75px',\r\n\t\t\t\t\t\tmargin: 'auto',\r\n\t\t\t\t\t\tmarginTop: '6rem',\r\n\t\t\t\t\t\tdisplay: 'block'\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className='sr-only'>Loading...</span>\r\n\t\t\t\t</Spinner>\r\n\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\r\n\t\t\t\t\t\t<div className='VideoDash vh-100'>\r\n\r\n\t\t\t\t\t\t\t<h1 className='w-100 my-5 text-center'>Video Upload</h1>\r\n\r\n\t\t\t\t\t\t\t<Row className='mt-4 d-flex justify-content-center '>\r\n\r\n\t\t\t\t\t\t\t\t<Col lg={5} className='d-flex flex-column align-items-center justify-content-start'>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className='w-100 ctrst-bg-secondary pt-2 mb-2 rounded'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Card className='w-75 mx-auto ctrst-bg-secondary'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<Card.Title>Inputs</Card.Title>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<Card.Body className='text-center'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<EditVideo />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<EditVideoTitle />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<EditVideoDescription />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<EditVideoTags />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<EditVideoThumbnailUrl />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<EditVideoGenres />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<EditVideoGame />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<EditVideoRecorded />\r\n\t\t\t\t\t\t\t\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t\t<Col lg={5} className='d-flex flex-column align-items-center justify-content-start mt-0 mb-3'>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className='ctrst-bg-secondary w-100 mb-3 p-2 rounded d-flex flex-column justify-content-center align-items-center'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Card.Body>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<Card.Title>Preview</Card.Title>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{curVideo.thumbnailUrl ? (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Card.Img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='top'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='w-75 mx-auto rounded'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={curVideo.thumbnailUrl}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Card.Img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='top'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='w-75 mx-auto rounded'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={NoThumbnail}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{curVideo.videoTitle ? (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{curVideo.videoTitle}</p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{videoTitleDefault}</p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{curVideo.tags && curVideo.tags.length ? (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ul className='d-flex flex-row flex-wrap justify-content-center mt-2 mb-3'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{curVideo.tags.map((tag) => (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={tag._id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='ctrst-genre-btn-static d-inline-block text-center btn-sm m-1 text-white'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tag.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{tagsDefault}</p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{curVideo.description ? (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{curVideo.description}</p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{descriptionDefault}</p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{curVideo.game ? (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{curVideo.game.gameTitle}</p>,\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={curVideo.game.gameImgUrl}></img>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{gamesDefault}</p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{curVideo.genres && curVideo.genres.length ? (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ul className='d-flex flex-row flex-wrap justify-content-center mt-2 mb-3'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{curVideo.genres.map((genre) => (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={genre._id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='ctrst-genre-btn-static d-inline-block text-center btn-sm m-1 text-white'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{genre.genreName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{genresDefault}</p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default VideoDash"]},"metadata":{},"sourceType":"module"}